<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨˜æ†¶é…å°éŠæˆ² (6x6)</title>
    
    <!-- CSS æ¨£å¼ -->
    <style>
        /* è¨­å®šæ•´å€‹éŠæˆ²å®¹å™¨ç½®ä¸­ */
        .game-container {
            max-width: 800px; /* é™åˆ¶ç¶²æ ¼å¤§å°ï¼Œå¯è‡ªè¡Œèª¿æ•´ */
            margin: 40px auto;
            text-align: center;
            font-family: sans-serif;
            padding: 10px;
        }

        /* 6x6 ç¶²æ ¼ä½ˆå±€ */
        .card-grid {
            display: grid;
            /* å»ºç«‹ 6 æ¬„å‡å‹»åˆ†ä½ˆçš„ç¶²æ ¼ */
            grid-template-columns: repeat(6, 1fr); 
            grid-gap: 10px; /* å¡ç‰‡é–“è· */
            padding: 10px;
            background-color: #eee;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* è¨ˆåˆ†æ¿æ¨£å¼ */
        .scoreboard {
            margin: 20px 0;
            font-size: 1.2em;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            font-weight: bold;
            color: #333;
        }

        /* å–®å¼µå¡ç‰‡å®¹å™¨ */
        .card {
            /* è®“å¡ç‰‡é«˜åº¦èˆ‡å¯¬åº¦ä¿æŒä¸€è‡´ï¼Œå½¢æˆæ­£æ–¹å½¢ */
            width: 100%;
            padding-bottom: 100%; /* åˆ©ç”¨ padding-bottom ç¢ºä¿é«˜åº¦ç­‰æ–¼å¯¬åº¦ */
            position: relative;
            perspective: 1000px; /* 3D ç¿»è½‰è¦–è§’ */
            cursor: pointer;
        }

        /* ç¿»è½‰å…§éƒ¨çµæ§‹ */
        .card-inner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s; /* ç¿»è½‰å‹•ç•«é€Ÿåº¦ */
            transform-style: preserve-3d; /* è®“å­å…ƒç´ åœ¨ 3D ç©ºé–“ä¸­å®šä½ */
            border-radius: 6px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* ç¿»è½‰æ•ˆæœï¼šç•¶å¡ç‰‡è¢«é»æ“Š (js åŠ ä¸Š .flipped) æ™‚ï¼Œæ—‹è½‰ 180 åº¦ */
        .card.flipped .card-inner,
        .card.matched .card-inner {
            transform: rotateY(180deg);
        }

        /* å¡ç‰‡æ­£é¢å’ŒèƒŒé¢å…±ç”¨æ¨£å¼ */
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* éš±è—å¡ç‰‡èƒŒé¢åœ¨æ­£é¢æ™‚çš„é¡¯ç¤º */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em; /* åœ–æ¡ˆå¤§å° */
            border-radius: 6px;
        }

        /* å¡ç‰‡èƒŒé¢ (æœªç¿»é–‹) */
        .card-back {
            background-color: #4CAF50; /* ç¶ è‰²èƒŒæ™¯ */
            color: white;
            font-size: 3em;
            font-weight: bold;
        }

        /* å¡ç‰‡æ­£é¢ (ç¿»é–‹å¾Œ) */
        .card-front {
            background-color: white;
            color: #333;
            transform: rotateY(180deg); /* é å…ˆæ—‹è½‰ 180 åº¦ï¼Œè®“å®ƒæˆç‚ºç¿»è½‰å¾Œçš„æ­£é¢ */
        }

        /* å·²é…å°çš„å¡ç‰‡æ¨£å¼ (å¯é¸ï¼Œè®“å®ƒçœ‹èµ·ä¾†æ·¡å‡º) */
        .card.matched {
            opacity: 0.5;
            cursor: default;
            pointer-events: none; /* ç¢ºä¿å·²é…å°çš„å¡ç‰‡ä¸èƒ½å†è¢«é»æ“Š */
        }

        /* éŠæˆ²çµæŸå½ˆå‡ºè¦–çª—æ¨£å¼ */
        .game-over-modal {
            display: none; /* é è¨­éš±è— */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 30px;
            background: white;
            border: 3px solid #4CAF50;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            z-index: 100;
            text-align: center;
        }

        .game-over-modal button {
            padding: 10px 20px;
            margin-top: 20px;
            font-size: 1.1em;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .game-over-modal button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>è¨˜æ†¶é…å°æŒ‘æˆ° ğŸ§ </h1>
        
        <!-- è¨ˆåˆ†æ¿ -->
        <div class="scoreboard">
            <span id="time">æ™‚é–“: 0 ç§’</span>
            <span id="moves">ç¿»ç‰Œæ¬¡æ•¸: 0</span>
        </div>

        <!-- å¡ç‰‡ç¶²æ ¼ï¼šé€™æ˜¯æ‰€æœ‰ 36 å¼µå¡ç‰‡æ”¾ç½®çš„åœ°æ–¹ -->
        <div class="card-grid" id="cardGrid">
            <!-- å¡ç‰‡å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>

        <!-- éŠæˆ²çµæŸè¨Šæ¯ (ä¸€é–‹å§‹éš±è—) -->
        <div class="game-over-modal" id="gameOverModal">
            <h2>æ­å–œæ‚¨ï¼ğŸ‰</h2>
            <p>æ‚¨æˆåŠŸå®Œæˆäº†æ‰€æœ‰é…å°ï¼</p>
            <p>ç¸½æ™‚é–“: <span id="finalTime"></span></p>
            <p>ç¸½ç¿»ç‰Œæ¬¡æ•¸: <span id="finalMoves"></span></p>
            <button id="restartButton">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>
    
    <!-- JavaScript é‚è¼¯ -->
    <script>
        // 36 å¼µå¡ç‰‡éœ€è¦ 18 å°åœ–æ¡ˆ
        const cardEmojis = [
            'ğŸ', 'ğŸŒ', 'ğŸ‡', 'ğŸ‰', 'ğŸ“', 'ğŸ’',
            'ğŸ', 'ğŸ¥­', 'ğŸ¥', 'ğŸ¥¥', 'ğŸ¥‘', 'ğŸ¥¦',
            'ğŸ¥•', 'ğŸŒ¶ï¸', 'ğŸ¥”', 'ğŸŒ½', 'ğŸ', 'ğŸ§€' 
        ];

        // éŠæˆ²ç‹€æ…‹è®Šæ•¸å’Œ DOM å…ƒç´ å¼•ç”¨ (ä½¿ç”¨ let ä»¥ä¾¿åœ¨ window.onload ä¸­è³¦å€¼)
        let cardGrid;
        let finalTimeSpan;
        let finalMovesSpan;
        let gameOverModal;
        let timeSpan;
        let movesSpan;
        let restartButton; 

        let gameBoard = []; // å„²å­˜æ‰€æœ‰å¡ç‰‡çš„é™£åˆ—
        let firstCard = null; // å„²å­˜ç¿»é–‹çš„ç¬¬ä¸€å¼µå¡ç‰‡
        let secondCard = null; // å„²å­˜ç¿»é–‹çš„ç¬¬äºŒå¼µå¡ç‰‡
        let lockBoard = false; // é˜²æ­¢åœ¨æª¢æŸ¥é…å°æ™‚ç©å®¶ç¹¼çºŒé»æ“Š
        let matchesFound = 0; // å·²é…å°æˆåŠŸçš„æ•¸é‡
        let moves = 0; // ç¿»ç‰Œæ¬¡æ•¸
        let timer = null; // è¨ˆæ™‚å™¨ ID
        let seconds = 0; // è¨ˆæ™‚ç§’æ•¸

        // --- è¼”åŠ©å‡½æ•¸ ---

        /**
         * Fisher-Yates æ´—ç‰Œç®—æ³•ï¼Œç”¨æ–¼æ‰“äº‚å¡ç‰‡é †åº
         * @param {Array} array - è¦æ‰“äº‚çš„é™£åˆ—
         */
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * é–‹å§‹è¨ˆæ™‚å™¨
         */
        function startTimer() {
            seconds = 0;
            timer = setInterval(() => {
                seconds++;
                timeSpan.textContent = `æ™‚é–“: ${seconds} ç§’`;
            }, 1000);
        }

        /**
         * åœæ­¢è¨ˆæ™‚å™¨
         */
        function stopTimer() {
            clearInterval(timer);
            timer = null;
        }

        // --- éŠæˆ²é‚è¼¯ ---

        /**
         * å•Ÿå‹•æˆ–é‡æ–°é–‹å§‹éŠæˆ²
         */
        function startGame() {
            // 1. é‡è¨­ç‹€æ…‹
            stopTimer();
            moves = 0;
            matchesFound = 0;
            movesSpan.textContent = `ç¿»ç‰Œæ¬¡æ•¸: 0`;
            timeSpan.textContent = `æ™‚é–“: 0 ç§’`;
            cardGrid.innerHTML = '';
            gameOverModal.style.display = 'none';

            // 2. æº–å‚™ 6x6 (36 å¼µ) çš„åœ–æ¡ˆ
            gameBoard = [...cardEmojis, ...cardEmojis]; 
            shuffle(gameBoard);

            // 3. å‹•æ…‹ç”Ÿæˆå¡ç‰‡
            gameBoard.forEach((emoji, index) => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.name = emoji; // å°‡åœ–æ¡ˆå­˜åœ¨ data-name å±¬æ€§
                card.dataset.id = index;
                card.innerHTML = `
                    <div class="card-inner">
                        <div class="card-face card-front">${emoji}</div>
                        <div class="card-face card-back">?</div> <!-- å¡ç‰‡èƒŒé¢æ¨™è¨˜ -->
                    </div>
                `;
                card.addEventListener('click', flipCard);
                cardGrid.appendChild(card);
            });
        }

        /**
         * è™•ç†å¡ç‰‡é»æ“Šå’Œç¿»è½‰
         * @param {Event} event - é»æ“Šäº‹ä»¶
         */
        function flipCard(event) {
            if (lockBoard) return; 
            const clickedCard = event.currentTarget;

            // é˜²æ­¢é‡è¤‡é»æ“ŠåŒä¸€å¼µå¡ç‰‡ æˆ– å·²é…å°çš„å¡ç‰‡
            if (clickedCard === firstCard || clickedCard.classList.contains('matched')) return;

            // é–‹å§‹éŠæˆ²å¾Œæ‰é–‹å§‹è¨ˆæ™‚
            if (timer === null && matchesFound === 0) {
                startTimer();
            }
            
            // ç¿»è½‰å¡ç‰‡
            clickedCard.classList.add('flipped');

            if (!firstCard) {
                // é€™æ˜¯ç¿»é–‹çš„ç¬¬ä¸€å¼µå¡ç‰‡
                firstCard = clickedCard;
                return;
            }

            // é€™æ˜¯ç¿»é–‹çš„ç¬¬äºŒå¼µå¡ç‰‡
            secondCard = clickedCard;
            moves++;
            movesSpan.textContent = `ç¿»ç‰Œæ¬¡æ•¸: ${moves}`;
            lockBoard = true; // é–å®šæ£‹ç›¤

            // æª¢æŸ¥é…å°
            checkForMatch();
        }

        /**
         * æª¢æŸ¥å…©å¼µç¿»é–‹çš„å¡ç‰‡æ˜¯å¦é…å°
         */
        function checkForMatch() {
            const isMatch = firstCard.dataset.name === secondCard.dataset.name;

            if (isMatch) {
                // æˆåŠŸé…å°
                disableCards();
            } else {
                // é…å°å¤±æ•—ï¼Œè“‹å›å¡ç‰‡
                unflipCards();
            }
        }

        /**
         * è™•ç†é…å°æˆåŠŸ
         */
        function disableCards() {
            // å°‡é…å°æˆåŠŸçš„å¡ç‰‡æ¨™è¨˜ç‚º matched
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');
            
            matchesFound++;
            resetBoard();

            // æª¢æŸ¥æ˜¯å¦æ‰€æœ‰å¡ç‰‡éƒ½é…å°æˆåŠŸ (18 å°)
            if (matchesFound === cardEmojis.length) {
                stopTimer();
                showGameOver();
            }
        }

        /**
         * è™•ç†é…å°å¤±æ•—ï¼Œè“‹å›å¡ç‰‡
         */
        function unflipCards() {
            // ç­‰å¾… 1 ç§’è®“ç©å®¶çœ‹æ¸…åœ–æ¡ˆå¾Œå†è“‹å›
            setTimeout(() => {
                // ç¢ºä¿å¡ç‰‡æœªè¢«æ¨™è¨˜ç‚º matched æ‰è“‹å›
                if (!firstCard.classList.contains('matched')) {
                    firstCard.classList.remove('flipped');
                }
                if (!secondCard.classList.contains('matched')) {
                    secondCard.classList.remove('flipped');
                }
                resetBoard();
            }, 1000); // å»¶é² 1000 æ¯«ç§’ (1 ç§’)
        }

        /**
         * é‡è¨­ç‹€æ…‹ï¼Œæº–å‚™ä¸‹ä¸€æ¬¡ç¿»ç‰Œ
         */
        function resetBoard() {
            [firstCard, secondCard, lockBoard] = [null, null, false];
        }

        /**
         * é¡¯ç¤ºéŠæˆ²çµæŸç•«é¢
         */
        function showGameOver() {
            finalTimeSpan.textContent = `${seconds} ç§’`;
            finalMovesSpan.textContent = `${moves} æ¬¡`;
            gameOverModal.style.display = 'block';
        }

        // ç¶²é è¼‰å…¥å¾Œè™•ç† DOM å…ƒç´ å’Œå•Ÿå‹•éŠæˆ²
        window.onload = function() {
            // 1. åœ¨ window.onload ä¸­åˆå§‹åŒ–æ‰€æœ‰ DOM å…ƒç´ çš„å¼•ç”¨
            cardGrid = document.getElementById('cardGrid');
            finalTimeSpan = document.getElementById('finalTime');
            finalMovesSpan = document.getElementById('finalMoves');
            gameOverModal = document.getElementById('gameOverModal');
            timeSpan = document.getElementById('time');
            movesSpan = document.getElementById('moves');
            restartButton = document.getElementById('restartButton'); 

            // 2. å•Ÿå‹•éŠæˆ²
            startGame();
            
            // 3. ç¶å®šé‡ç©æŒ‰éˆ•äº‹ä»¶
            if (restartButton) {
                restartButton.addEventListener('click', startGame);
            }
        };
    </script>
</body>
</html>